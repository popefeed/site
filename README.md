# Pope Feed Site

A modern, responsive Hugo-based frontend that displays papal documents in a beautiful social media-style feed with official Vatican images and multilingual support.

## 📱 Overview

The Pope Feed Site is a static website built with Hugo that presents papal documents in an engaging, Instagram/LinkedIn-style social feed. It consumes data from the [Pope Feed API](https://github.com/popefeed/api) which is generated by the [Pope Feed Scrapper](https://github.com/popefeed/scrapper).

## ✨ Features

- 📱 **Social Media Feed**: Instagram/LinkedIn-style card layout
- 🖼️ **Vatican Images**: Official pope photographs from Vatican website
- 🌍 **Multilingual Support**: 6+ languages (EN, ES, PT, IT, FR, LA)
- 📄 **PDF Viewer**: Embedded PDF.js with side-by-side comparison
- 🔍 **Search & Filter**: By pope, document type, language, date
- 📱 **Mobile Optimized**: Responsive design for all devices
- 🎨 **Clean Design**: Minimal, beautiful interface with neutral colors
- ⚡ **Fast Loading**: Static site generation with Hugo
- 🔄 **Offline Support**: Service Worker for PDF caching

## 🚀 Quick Start

### Prerequisites

- Hugo Extended (latest version for SCSS support)
- Node.js (for build tools and dependencies)
- Access to Pope Feed API (local or remote)

### Installation

```bash
# Clone the repository
git clone https://github.com/popefeed/site.git
cd site

# Install Hugo Extended
# macOS
brew install hugo

# Windows
choco install hugo-extended

# Linux
sudo snap install hugo --channel=extended
```

### Development Setup

```bash
# Start development server
hugo server -D

# Site will be available at http://localhost:1313
```

### Production Build

```bash
# Build optimized site
hugo --minify

# Output will be in public/ directory
```

## 🔧 Configuration

### Hugo Configuration (`hugo.toml`)

```toml
baseURL = "https://your-domain.com"
languageCode = "en-us"
title = "Pope Feed"
theme = ""

[params]
  api_base_url = "http://localhost:8000"  # Pope Feed API URL
  site_title = "Pope Feed"
  site_description = "Vatican Documents in a Social Feed"
  posts_per_page = 50

[markup]
  [markup.goldmark]
    [markup.goldmark.renderer]
      unsafe = true
```

### API Integration

The site fetches data from the Pope Feed API:

```javascript
// Configuration in layouts/_default/baseof.html
const API_BASE_URL = '{{ .Site.Params.api_base_url }}';

class PostsFeed {
  constructor() {
    this.apiBase = API_BASE_URL;
    this.currentPage = 1;
    this.totalPages = 1;
  }

  async loadPosts(page = 1) {
    const response = await fetch(`${this.apiBase}/posts/page=${page}.json`);
    return await response.json();
  }
}
```

## 📁 Project Structure

```
site/
├── archetypes/                 # Content templates
├── content/                    # Content files
├── layouts/                    # Hugo templates
│   ├── _default/
│   │   ├── baseof.html        # Base template with API integration
│   │   └── single.html        # Single page template
│   ├── index.html             # Homepage with social feed
│   └── partials/              # Reusable template parts
├── static/                     # Static assets
│   ├── css/                   # Custom CSS
│   ├── js/                    # JavaScript files
│   └── images/                # Site images
├── assets/                     # Build assets (SCSS, etc.)
├── hugo.toml                   # Hugo configuration
└── README.md                   # This file
```

## 🎨 Design System

### Color Palette

```css
/* Neutral grays with blue accent */
:root {
  --color-primary: #3B82F6;     /* Blue accent */
  --color-gray-50: #F9FAFB;     /* Light background */
  --color-gray-100: #F3F4F6;    /* Card backgrounds */
  --color-gray-600: #4B5563;    /* Text secondary */
  --color-gray-900: #111827;    /* Text primary */
  --color-white: #FFFFFF;       /* Pure white */
}
```

### Typography

```css
/* Clean, readable typography */
.post-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--color-gray-900);
}

.post-meta {
  font-size: 0.875rem;
  color: var(--color-gray-600);
}
```

### Layout Components

```css
/* Social media card styling */
.post-card {
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.pope-avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  object-fit: cover;
}
```

## 🔄 Integration with Other Components

### With Pope Feed API

The site consumes data from the [Pope Feed API](https://github.com/popefeed/api):

```bash
# Setup API locally
git clone https://github.com/popefeed/api.git
cd api
python -m http.server 8000

# Configure site to use local API
# In hugo.toml:
[params]
  api_base_url = "http://localhost:8000"
```

### With Pope Feed Scrapper

The site displays data generated by the [Pope Feed Scrapper](https://github.com/popefeed/scrapper):

```bash
# Generate fresh data
git clone https://github.com/popefeed/scrapper.git
cd scrapper
pip install -r requirements.txt
python main.py                              # Scrape documents
python scrapper/image_downloader.py         # Download images
python generate_posts_api.py                # Generate API

# Data will be available in ../api/ for the site to consume
```

## 📱 Features in Detail

### Social Media Feed

The homepage displays papal documents as social media posts:

```html
<!-- Post structure -->
<article class="post-card">
  <div class="post-header">
    <img src="{{ .pope.avatar }}" class="pope-avatar" alt="{{ .pope.name }}">
    <div class="pope-info">
      <h3>{{ .pope.name }}</h3>
      <p>@{{ .pope.handle }}</p>
    </div>
  </div>
  <div class="post-content">
    <h2>{{ .document.title }}</h2>
    <p>{{ .document.excerpt }}</p>
    <div class="post-meta">
      <span>{{ .document.type }}</span>
      <span>{{ .document.date }}</span>
      <span>{{ .document.language_count }} languages</span>
    </div>
  </div>
</article>
```

### PDF Viewer Integration

Embedded PDF.js for document viewing:

```javascript
// PDF viewer setup
class PDFViewer {
  constructor(container) {
    this.container = container;
    this.pdfDoc = null;
    this.pageNum = 1;
  }

  async loadPDF(url) {
    const loadingTask = pdfjsLib.getDocument(url);
    this.pdfDoc = await loadingTask.promise;
    this.renderPage(this.pageNum);
  }
}
```

### Responsive Design

Mobile-first responsive design:

```css
/* Mobile first */
.post-card {
  padding: 1rem;
  margin: 0 1rem 1rem;
}

/* Tablet and up */
@media (min-width: 768px) {
  .post-card {
    padding: 2rem;
    margin: 0 0 1.5rem;
  }
}

/* Desktop */
@media (min-width: 1024px) {
  .feed-container {
    max-width: 800px;
    margin: 0 auto;
  }
}
```

## 🔍 Search and Filtering

Client-side search and filtering capabilities:

```javascript
class FeedFilter {
  constructor(feed) {
    this.feed = feed;
    this.filters = {
      pope: null,
      type: null,
      language: null,
      dateRange: null
    };
  }

  filterPosts(posts) {
    return posts.filter(post => {
      return this.matchesPope(post) &&
             this.matchesType(post) &&
             this.matchesLanguage(post) &&
             this.matchesDateRange(post);
    });
  }
}
```

## 🌍 Multilingual Support

Hugo's built-in i18n capabilities:

```yaml
# i18n/en.yaml
posts:
  load_more: "Load More Posts"
  no_posts: "No posts available"
  error_loading: "Error loading posts"

navigation:
  home: "Home"
  about: "About"
  search: "Search"
```

Usage in templates:

```html
<button class="load-more-btn">
  {{ i18n "posts.load_more" }}
</button>
```

## 🚀 Deployment

### Static Hosting Options

#### Netlify
```bash
# Connect repository and configure
# Build command: hugo --minify
# Publish directory: public
```

#### Vercel
```bash
# Import repository
# Framework: Hugo
# Build command: hugo --minify
# Output directory: public
```

#### GitHub Pages
```yaml
# .github/workflows/hugo.yml
name: Deploy Hugo site to Pages
on:
  push:
    branches: ["main"]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: 'latest'
          extended: true
      - run: hugo --minify
      - uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
```

#### AWS S3 + CloudFront
```bash
# Build and deploy
hugo --minify
aws s3 sync public/ s3://your-bucket-name
aws cloudfront create-invalidation --distribution-id YOUR_DIST_ID --paths "/*"
```

### Environment Configuration

```bash
# Development
hugo server -D --environment development

# Staging
hugo --environment staging --baseURL https://staging.popefeed.com

# Production
hugo --minify --environment production --baseURL https://popefeed.com
```

## ⚡ Performance Optimization

### Hugo Build Optimization

```toml
# hugo.toml
[minify]
  disableCSS = false
  disableHTML = false
  disableJS = false
  disableJSON = false
  disableSVG = false
  disableXML = false

[imaging]
  resampleFilter = "lanczos"
  quality = 85
  anchor = "smart"
```

### Asset Optimization

```html
<!-- CSS minification -->
{{ $style := resources.Get "scss/main.scss" | toCSS | minify | fingerprint }}
<link rel="stylesheet" href="{{ $style.RelPermalink }}">

<!-- JavaScript minification -->
{{ $js := resources.Get "js/main.js" | minify | fingerprint }}
<script src="{{ $js.RelPermalink }}"></script>
```

### Service Worker for Caching

```javascript
// sw.js - Service Worker for PDF caching
self.addEventListener('fetch', event => {
  if (event.request.url.includes('.pdf')) {
    event.respondWith(
      caches.match(event.request)
        .then(response => response || fetch(event.request))
    );
  }
});
```

## 🧪 Testing

### Local Testing

```bash
# Test development build
hugo server -D --disableFastRender

# Test production build
hugo --minify
cd public && python -m http.server 8080
```

### Performance Testing

```bash
# Lighthouse CI
npm install -g @lhci/cli
lhci autorun
```

## 🔗 Related Projects

- **[Pope Feed API](https://github.com/popefeed/api)** - Backend API serving document data
- **[Pope Feed Scrapper](https://github.com/popefeed/scrapper)** - Generates the API data
- **[Pope Feed Main](https://github.com/popefeed/popefeed)** - Main repository with subtrees

## 📊 Browser Support

- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+
- iOS Safari 13+
- Android Chrome 80+

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Make your changes
4. Test locally (`hugo server -D`)
5. Build production (`hugo --minify`)
6. Commit your changes (`git commit -m 'Add amazing feature'`)
7. Push to the branch (`git push origin feature/amazing-feature`)
8. Open a Pull Request

### Development Guidelines

- Follow Hugo best practices
- Use semantic HTML
- Write accessible code (ARIA labels, alt texts)
- Test on multiple devices/browsers
- Optimize images and assets
- Write meaningful commit messages

## 📄 Data Source

The site displays content sourced from:
- **Pope Feed API**: Generated document data
- **Vatican.va**: Original source of all papal documents
- **Official Images**: Pope photographs from Vatican website

## 📜 License

MIT License - see LICENSE file for details.

## 📞 Support

- **Issues**: [GitHub Issues](https://github.com/popefeed/site/issues)
- **Documentation**: [Pope Feed Main Repo](https://github.com/popefeed/popefeed)
- **Hugo Docs**: [Hugo Documentation](https://gohugo.io/documentation/)

## 🎉 Acknowledgments

- Hugo team for the excellent static site generator
- Vatican.va for providing official papal documents
- PDF.js team for PDF rendering capabilities
- Tailwind CSS for design inspiration